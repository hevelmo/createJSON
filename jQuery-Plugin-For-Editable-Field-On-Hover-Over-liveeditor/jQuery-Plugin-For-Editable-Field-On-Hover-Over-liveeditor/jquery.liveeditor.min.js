(function(n,t,i,r){function p(){nt(n(this))}function a(){tt(this)}function w(){var r=n(this).unbind("focus",w).select(),i=r.parent().unbind("mouseleave",a),t=i.data(u);return i[0]===t._focusedContainer?!0:t._focusedContainer&&!c(t._focusedContainer)?!1:(t._focusedContainer=i[0],r.keydown(ut),n.isFunction(t.onEditorFocused)&&t.onEditorFocused.call(i,r),!0)}function ut(t){var e=t.keyCode||t.which,i,o;if(e==13)t.preventDefault(),i=n(this).parent(),c(i);else if(e==27)t.preventDefault(),i=n(this).parent(),tt(i);else if(e==9){t.preventDefault();i=n(this).parent();o=i.data(u);c(i);var s=t.shiftKey?n(o._selector.get().reverse()):o._selector,f=null,r=!1;do if(s.each(function(){if(r&&h(n(this)))return f=n(this),!1;if(this===i[0]){if(r)return r=!1,!1;r=!0}}),!r)break;while(f==null);f!==null&&nt(f).focus()}}function h(n){return n.data(l)===!0}function ft(n){return h(n)||n.data(l,!0).mouseenter(p),n}function et(n){return h(n)&&n.data(l,!1).unbind("mouseenter",p),n}function e(t){var i,f=t.data(u);return n.isFunction(f.onGetValue)&&(i=f.onGetValue.call(t)),i===r&&(i=t.hasClass(f.combobox.css)||t.hasClass(f.checkbox.css)?t.attr("value")||"":t.text()),i}function s(t,i,e,o){var s,h,c;return(o===r&&(o=!1),s=t.data(u),n.isFunction(s.onSetValue)&&(h=s.onSetValue.call(t,i,e,o),h===!1))?!1:(h===r&&(t.hasClass(s.combobox.css)?t.attr("value",i):t.hasClass(s.checkbox.css)&&(t.attr("value",i),e==null&&(e=i==s.checkbox.checked.value?s.checkbox.checked.html:s.checkbox.unchecked.html)),e==null&&(e=i),t.html(e)),t.unbind("mouseleave",a).removeClass(s.editingCss),t[0]===s._focusedContainer&&(s._focusedContainer=null),c=t.data(f),i!=c?s.changedCss&&t.addClass(s.changedCss):s.changedCss&&t.removeClass(s.changedCss),!0)}function b(t){var i=t.data(u);n.isFunction(i.onChanged)&&i.onChanged.call(t)}function k(t,i){for(var r=n(i),u=[];r.get(0)!=t;)if(u.push(r.index()),r=r.parent(),r.index()===-1)throw"thisRow is not a parent of field!";return u.reverse()}function d(n,t){var i=n;for(var r in t)i=i.children().eq(t[r]);return i}function g(n,t){var i=d(n,t);return i.attr("data-name")||i.attr("name")}function nt(t){var r=t.data(u),i=t.children(0),s;return i.data(o)!=null?i:(s=e(t),t.data(f)==null&&t.data(f,s),i=ot(t,s),i.focus(w),i.data(v,t.html()),t.html(i).mouseleave(a).addClass(r.editingCss),n.isFunction(r.onEditorOpened)&&r.onEditorOpened.call(t,i),i)}function ot(t,i){var r,f=t.data(u),s=f.onEditorCreating,e;if(s&&(r=s(t,i)),!r)if(t.hasClass(f.combobox.css)){r=n("<select>").width(t.width()-y);e=f.onEditorOptions.call(t);switch(n.type(e)){case"string":r.append(n(e))}n('option[value="'+i+'"]',r).prop("selected",!0)}else r=t.hasClass(f.checkbox.css)?n('<input type="checkbox"/>').prop("checked",i==f.checkbox.checked.value):n('<input type="text"/>').width(t.width()-y).val(i);return r.data(o,i),f.editorCss&&r.addClass(f.editorCss),r}function c(t){var i=n(t),r=i.children(0),f;if(!r.length||r.data(o)==null)return!0;var h=r.data(o),e=it(r),c=st(r);return s(i,e,c)?(f=i.data(u),h!=e&&b(i),n.isFunction(f.onEditorClosed)&&f.onEditorClosed.call(i),!0):!1}function tt(t){var i=n(t),r=i.children(0),e,h,f;return!r.length||r.data(o)==null?!0:(e=r.data(o),h=r.data(v),!s(i,e,h,!0))?!1:(f=i.data(u),n.isFunction(f.onEditorClosed)&&f.onEditorClosed.call(i),!0)}function it(t){var i,e=t.parent(),f=e.data(u);return n.isFunction(f.onEditorGetValue)&&(i=f.onEditorGetValue.call(t)),i===r&&(i=t.is(":checkbox")?t.prop("checked")?f.checkbox.checked.value:f.checkbox.unchecked.value:t.is("select")?n("option:selected",t).val():t.val()),i}function st(t){var i,e=t.parent(),f=e.data(u);return n.isFunction(f.onEditorGetValue)&&(i=f.onEditorGetHtml.call(t)),i===r&&(i=t.is("select")?n(":selected",t).text():null),i}function ht(t,i){var r=n(t),h,c,l,o;if(r.data(u,i),i.fillControls)if(r.hasClass(i.combobox.css)){o=e(r);r.data(f,o);h=i.onEditorOptions.call(t);switch(n.type(h)){case"string":c=n("<select>").append(h).find('option[value="'+o+'"]');l=c.html();s(r,o,l,!0)}}else r.hasClass(i.checkbox.css)&&(o=e(r),r.data(f,o),s(r,o,null,!0))}var u="liveeditor-options",f="liveeditor-old",l="liveeditor-enabled",o="liveeditor-original-value",v="liveeditor-original-html",rt={fillControls:!1,changedCss:"liveeditor-changed",editingCss:null,editorCss:null,combobox:{css:"combo"},checkbox:{css:"checkbox",checked:{value:"true",html:"X"},unchecked:{value:"false",html:""}},onGetValue:null,onSetValue:null,onChanged:null,onEditorCreating:null,onEditorOptions:function(){return'<option value=""><\/option>'},onEditorOpened:null,onEditorFocused:null,onEditorClosed:null},y=5;n.liveeditor={isEnabled:function(n){return h(n)},enable:function(n){return ft(n)},disable:function(n){return et(n)},closeEditor:function(n){return n.each(function(){c(this)}),n},get:function(t){var i=[];return t.each(function(){var r=n(this),t=r.children(0);t.length&&t.data(o)!=null?i.push(it(t)):i.push(e(r))}),i.length===1?i[0]:i},serialize:function(t,i){var r=[];return t.filter(function(){var t=n(this);return(i||t.is("[data-name]")||t.is("[name]"))&&t.data(u)}).each(function(){var t=n(this),u=t.attr("data-name")||t.attr("name")||i.eq(t.index()).attr("data-name")||i.eq(t.index()).attr("name");r.push(encodeURIComponent(u)+"="+encodeURIComponent(e(t)))}),r.join("&")},serializeRow:function(t,i,f){var s=n(t).get(0),o=[];return n("*",t).filter(function(){return n(this).data(u)}).each(function(){var h=k(t,this),u=g(i,h),c,s;u!==r?(f!==r&&(u=u.replace("[]","["+f+"]")),c=e(n(this)),o.push(u+"="+encodeURIComponent(c))):(s="FAILED to get data-name for row editor at index: "+h.join(",")+"!",console?console.log(s):alert(s))}),o.join("&")},getIndexes:function(n,t){return k(n,t)},followIndexes:function(n,t){return d(n,t)},getName:function(n,t){return g(n,t)},set:function(t,i,r){return t.each(function(){var t=n(this),o=e(t),u;t.data(f)==null&&t.data(f,o);s(t,i,r)&&(u=t.data(f),i!==u&&b(t))}),t},reset:function(t){return t.each(function(){var t=n(this),o=t.data(f),i,r;o!=null&&(i=e(t),i!==o&&(t.data(f,i),r=t.data(u),r.changedCss&&t.removeClass(r.changedCss)))}),t}};n.fn.liveeditor=function(t){var i=n.extend({},rt,t);return i._focusedContainer=null,i._selector=this,this.each(function(){ht(this,i)}),n.liveeditor.enable(this),this}})(jQuery,window,document);
/*
//# sourceMappingURL=jquery.liveeditor.min.js.map
*/